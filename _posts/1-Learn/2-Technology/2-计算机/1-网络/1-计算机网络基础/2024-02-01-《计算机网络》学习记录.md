---
categories: [计算机网络]
tags: 计算机网络
---


# 《计算机网络》学习记录



## 第一章概述

### 互联网特点
- 连通性和共享
    - 连通性：用户之间可以跨地域进行各种信息传递
    - 共享性：资源共享，信息，软件，硬件均可共享

### 计算机网络概述
#### 网络的网络
  - 计算机网络（网络）组成
    - 结点：可以是计算机，集线器，交换机或者路由器等
    - 链路：链路指的是各结点间的链接
  - 互连网
    - 网络之间链接起来称为互连网，因此互联网是“网络的网络”
  - 总结
    - 计算机连接在一起叫做**网络**，**互连网**把许多网络通过路由器连接在一起，与网络相连接的计算机叫做**主机**

#### 互联网基础结构发展三阶段
- 第一阶段：单个网络ARPANET向互连网发展的过程：
  - 小写i的**internet**是一个通用名词，泛指**多个计算机网络互连而成的计算机网络**，这些网络之间可以使用任意通信协议，不一定必须是**TCP/IP**协议
  - 大写I的**Interne**t是一个专用名词，指**当前全球最大，开放，有众多网络相互连接而成的特定互联网**，采用**TCP/IP**协议族作为通信规则，前身是美国ARPANET
- 第二阶段：建成了**三级结构的互联网**
  - 主干网：
  - 地区网：
  - 校园网（企业网）：
- 第三阶段：形成**多层次ISP结构的互联网**
  - **ISP**：互联网提供者
  - **主干ISP**：由专门的公司创建和维持，服务面积最大，拥有高速主干网，部分地区**ISP**可直接与主干**ISP**相连
  - **地区ISP**：较小的**ISP**，通过一个或者多个**ISP**链接起来，位于等级第二层，数据率低一些
  - **本地ISP**：本地**ISP**给用户提供直接的服务，本地**ISP**可以连接到地区**ISP**，也可以连接到主干**ISP**
  - **IXP**：**互联网交换点**，**IXP**允许两个网络直接相连并交换分组，而不需要通过第三个网络来转发分组

#### 联网标准化工作
- **互联网协会（W-ISOC）**
  - **互联网体系结构委员会**
    - **互联网工程部IETF**
      - **互联网工程指导小组**：针对协议开发和标准化
    - **互联网研究部IRTF**
      - **研究长期考虑的问题**：协议，应用，体系结构等
- 互联网标准三阶段：
  - **互联网草案**：有效期六个月
  - **建议标准**：成为RFC文档
  - **互联网标准**：成为正式标准，分配**STD xx**编号

### 互联网的组成
- **边缘部分**：由所有的互联网上的主机组成，这部分是用户**直接使用**的，用来进行通信和资源共享
- **核心部分**：由大量网络和连接这些网络的路由器组成，这部分是为**边缘部分提供服务**的（提供连通性和交换）

#### 互联网边缘部分
- 处在互联网边缘的部分就是连接在互联网上的所有主机，这些主机又称为**端系统**
- **端系统**通信方式分为两大类：
  - 客户-服务器方式（C/S）：**客户是请求方，服务器是服务提供方**
    - 客户程序：
      - 被用户调用后运行，通信时主动向远端服务器发起通信，因此客户端必须知道服务器程序的地址
      - 不需要特殊硬件和复杂程序
    - 服务器程序：
      - 专门用来提供某种服务的程序，可**同时处理**多个远端或者本地请求
      - 系统启动后自动调用并一直运行，被动等待并接受各地请求，因此，服务端不需要知道客户端程序的地址
      - 一般需要特殊硬件和高级操作系统支持
  - 对等方式（P2P）：
    - 运行P2P程序的主机之间可以进行对等通信，本质还是C-S方式，但是主机既是客户机也是服务器
    - 对等链接方式支持大量用户同时工作

#### 互联网核心部分
- 互联网核心部分是互联网中最复杂的部分，因为我网络中的核心部分要向网络边缘中的大量主机提供连通性，使边缘部分中的任何一台主机能向其他主机通信
- 网络核心部分起特殊作用的是**路由器**
  - 路由器是一种专用计算机，实现**分组交换**的关键，任务是**转发收到的分组**
    - 电路交换主要特点：
      - **建立链接**---**通话**---**释放链接**
      - 在通话的全部时间内，通话的两个用户始终占用端到端的通信资源
    - 分组交换的主要特点：采用存储交换技术
      - **报文**：要发送的整块数据
      - **包**：将较长的报文划分为一个个更小的等长数据段，在每个数据段前面加上一些必要的控制信息组成的**首部*，就构成了一个**分组**，又被称为**包**

#### 主机与路由器
- 位于网络边缘的主机和位于网络核心的路由器都是计算机，但是作用不同
  - 主机：用来为用户进行信息处理
  - 路由器：用来转发分组，进行分组交换
    - 路由器收到一个分组，先暂时存储一下，检查其首部，按照其中目的地，找到合适的接口转发出去，把分组交给下一个路由器，这样一步一步以存储转发的方式吧分组交给最终的主机
    - 各个路由器之间必须经常交换彼此掌握的路由信息，创建和动态维护路由器的转发表，是的转发表能够在整个网络拓扑发生变化时及时更新
    - 分组在哪个链路上时才会占用这段链路的通信资源，分组达到一个路由器后，先存储下来，查找转发表，然后从一个合适链路转发出去，省去了建立连接和释放连接的开销
    - 互联网采用了专门的措施，保证了数据的传输具有非常高的可靠性。当网络中某些节点或者链路发生故障时，路由器中路由**选择协议**能够自动找到转发分组最合适的路径

#### 分组交换的优点：

| 优点 | 所采用的手段                                         |
|:--:|:-----------------------------------------------|
| 高效 | 在分组传输的过程中动态分配传输带宽，对通信链路是逐段占用                   |
| 灵活 | 为每一个分组独立地选择最合适的转发路由                            |
| 迅速 | 以分组作为传递单位，可以不先建立连接就能向其他主机发送分组                  |
| 可靠 | 保证可靠性的网络协议，分布式多路由的分组交换我网，使网络有很好的生存性            |

#### 分组交换的缺点：
- 分组在各路由器存储转发时需要排队，造成一定的**延迟**。
- 分组交换无法向电路交换一样建立连接保证所需要的各种资源，因此**无法确保通信时端到端的宽带**
- 分组交换时各分组必须要携带的控制信息造成了一定的**开销**

#### 电路交换--报文交换--分组交换
- 电路交换：整个报文的比特流连续的从源点直达终点，好像是一个管道中传送
- 报文交换：整个报文先传送到相邻节点，全部存储下来后查找转发表，转发到下一个结点
- 分组交换：单个分组差传递到相邻结点，存储下来后查询转发表，转发到下一个结点
- **总结**：
  - 如果连续传递大量的数据，并且其传送时间远大于连接建立时间，则电路交换的传输速率较快，报文交换和分组交换不需要预先分配传输带宽，在传递突发数据时可提高整个网络的信道利用率，因为分组交换传递的数据长度远小于整个报文的长度，所以分组交换比报文交换延迟低，灵活度低

### 计算机网络在我国的发展
- 1994年4月20日，中国用64bit/s专线正式连入互联网
- 五大公用计算机网络：
  - **中国电信互联网**
  - **中国联通互联网**
  - **中国移动互联网**
  - **中国教育和科研计算机网**
  - **中国科学技术网**

### 计算机网络的类别
#### 计算机网络的定义
- 计算机网络主要是一些通用的，可编程的硬件互连而成的，而这些硬件并非专门用来实现某一个特定目的。这些可编程的硬件能够用来传递不同类型的数据，并能支持广泛的和日益增长的应用

#### 不同类别的计算机网络
- 按照网络的作用范围进行分类
  - **广域网WAN**：范围广，距离远，因此也被叫做**远程网**
  - **城域网MAN**：一般范围是一个城市，目前很多城域网采用的是以太网技术，因此有时也并入局域网进行讨
  - **局域网LAN**：一般使用微星计算机或者工作站通过高速线路进行连接
  - **个人区域网PAN**：个人区域网就是个人工作的地方把属于个人的电子设备，用无线技术连接起来的网络，因此也称为**无线个人区域网WPAN**
- 按照网络的使用者进行分类
  - **公用网**：所有愿意按照电信公司规定缴纳一定费用的人都可以使用这种网络
  - **专用网**：某个部分为满足本单位的特殊需求而搭建的网络：军队，铁路，银行，电力等

### 计算机网络性能
#### 计算机网络的性能指标
- **速率**：**比特** ，意思是**二进制数字**，网络中**速率**指的也是**数据传递速率**，他也称为**数据率**或者**比特率**
- **带宽**：
  - 带宽本来是指某个**信号具有的频带宽度**，信号的带宽是指该信号所包含的各种不同频率成分所占据的频率范围。这种意义的**带宽的单位**是**赫兹**
  - 在计算机网络中，带宽用来表示网络中**通道**传递数据的能力，表示单位时间内网络中的某信道所能通过的**最高数据率**。这种意义的**宽带的单位**是**数据率的单位**bit/s
- **吞吐量**：单位时间内通过某个网络的实际的数据量
- **时延**：指数据从网络的一端传送到另一端所需要的时间
  - **发送时延**：**发送时延是主机或者路由器发送数据帧所需要的时间**，也就是从发送数据帧的第一个比特算起，该帧的最后一个比特发送完毕所需要的时间
    - 发送时延=数据帧长度/发送速率
  - **传播时延**：**传播时延是电磁波在信道中传播一定的距离需要花费的时间**。
    - 传播时延=信道长度/电磁波在信道上的传播速率
  - **处理时延**：**主机或者路由器在收到分组时要花费一定时间 进行处理，分析首部，从分组中提取数据，进行差错检验或者查找适当路由等**
  - **排队时延**：分组在经过网络传输时，要经过很多路由器，但是分组在进入路由器后现在输入队列中排毒等待处理。
  - **总时延**=**发送时延**+**传播时延**+**处理时延**+**排队时延**
  - **总结**：**对于高速网络，我们提高的仅仅是数据发送速率而不是比特在链路上的传播速率**，**提高数据的发送速率只是减少了数据发送时延**
- **时延带宽积**：**时延带宽积** = **传播时延** x **带宽**
  - **时延带宽积**表示链路管道的体积，表示这样的链路可以容纳多少个比特
  - 假设**时延带宽积**为2 x 10^5bit 若发送端连续发送数据，则在发送的第一个比特即将到达终点时，发送端就已经发送了20万个比特，而这20万比特都在链路上向前移动，因此链路的**时延带宽积**又称为**以比特为单位的链路长度**
- **往返时间RTT**：
  - 假设**RTT = 2s**,可以计算A向B发送数据的有效数据率
  - 有效数据率 = 数据长度/(发送时间+RTT)
- **利用率**：**利用率**有信道利用率和网络利用率两种
  - 信道利用率：某信道有百分之几的时间被利用的，完全空闲的信道利用率是0
  - 网络利用率：全网络的信道利用率的加权平均值
  - 信道利用率并非是越高越好，因为利用率增大时，会引起时延迅速增加
  - **网络时延** = **网络空闲时延** / (1 - **利用率**)
  - **信道或者网络的利用率过高会产生非常大的时延，当网络的利用率接近1时，网络的时延趋于无穷大**
#### 计算机网络的非性能指标
- **费用**
- **质量**
- **标准化**
- **可靠性**
- **可扩展性和可升级性**
- **易于管理和维护**

### 计算机网络体系结构
#### 计算机网络体系结构的形成
- 两台计算机之间进行传送数据需要以下几项工作：
  - 发起通信的计算机必须将数据数据通信的通路进行**激活**，所谓**激活**就是发送一些信令，保证传送的计算机数据能在这条通路上正确发送和接收
  - 要告诉网络如何识别接收数据的计算机
  - 发起通信的计算机必须查明对方计算机是否开机，并且网络连接正常
  - 发送通信的计算机中的应用程序必须弄清楚，在对方计算机中的文件管理程序是否已经做好接收文件和存储文件的准备工作
  - 若文件格式不兼容，至少其中一台计算机应完成格式转换功能
  - 对出现的各种差错和意外事故，如数据传送错误，重复或丢失，网络中某个结点交换机出现故障等，应当有可靠的措施保证对方计算机最终能够收到正确的文件
#### 协议与划分层次
- 计算机网络中要做到有条不紊的交换数据，必须遵循一些事先约定好的规则，**这些规则明确 规定了交换的数据格式以及有关的同步问题**，**同步**指的是广义同步，在一定条件下应当发生什么事件，因此**同步含有时序的意思**，这些**为网络中的数据交换而建立的规则，标准或者约定称为网络协议**称为**网络协议**
- **网络协议**：
  - **语法**：数据与控制信息的结构或格式
  - **语义**：即需要发生何种控制信息，完成何种动作以及做出何种响应
  - **同步**：即事件实现顺序的详细说明
  - 只要想让连接在网络上的另一台计算机做点什么事情，都需要有协议，但是**在自己的个人电脑上进行文件存盘操作时，就不需要任何网络协议**，除非这个用来存储的文件的磁盘是网络上的某个文件服务器的磁盘
- **划分层次**：
  - **优点**：
    - **各层之间相互独立**：某一层只需要知道层与层之间的接口所提供的服务，不需要知道下一层是如何实现的，每一层都实现一个独有的功能
    - **灵活性好**：任意一层发生变化，只要层间接口关系保持不变，则这层上下的层均不受影响
    - **结构上可分割开**：各层都可以采用最合适的技术实现
    - **易于实现和维护**：这种结构使得实现和调试一个庞大而又复杂的系统变得易于处理，因为整个系统被分解成为若干个相对独立的子系统
    - **能促进标准化工作**：因为每层的功能及所提供的服务都有了精确的说明
  - **缺点**：
    - 有些功能在不同的层中重复出现，产生了额外开销
  - 通常各层需要完成的功能主要有以下一些：
    - **差错控制**：使相应层次对等方的通信更加可靠
    - **流量控制**：发送端的发送速率必须使接收端来得及接收，不能太快
    - **分段和重装**：发送端将要发送的数据划分为更小的单位，在接收端将其还原
    - **复用和分用**：发送端几个高层会话复用一条低层会话对的连接，在接收端再进行分用
    - **连接建立和释放**：交换数据前先建立一条逻辑连接，数据传送结束后释放连接
  - **总结**：
    - **计算机网络的各层及其协议的集成**就是网络的**体系结构**，**计算机网络的体系结构就是这个计算机网络及其构件所应完成的功能的精确定义**
    - **体系结构是抽象的，而实现则是具体的，是真正在运行的计算机硬件和软件**
#### 具有五层协议的体系结构
- **OSI七层协议**：物理层、数据链路层、网络层、运输层、会话层、表示层、应用层
- **TCP/IP四层协议**：网络接口层、忘记层IP、运输层(TCP或者UDP)、应用层
- **五层协议**：物理层、数据链路层、网络层、运输层、应用层
- 分层讲解:
  - **应用层**：通过应用进程间的交互来完成特定物网络应用，应用层协议定义的是**应用进程间通信和交互的规则**，应用层交互的数据单元称为**报文**
    - **进程**：指的是计算机中**正在运行的程序**
    - **DNS**：域名系统
    - **HTTP**：支持万维网
    - **SMTP**：支持电子邮件
  - **运输层**：负责向**两台主机种进程之间的通信**提供**通用的数据传输**服务，因为一台主机可同时运行多个进程，因此运输层有**复用**和**分用**的功能
    - **复用**：多个应用层同时使用下面运输层的服务
    - **分用**：运输层把收到的信息分别交付上面应用层中的相应进程
    - **运输层**使用以下两种协议：
      - **传输控制协议TCP**：提供面向连接的，可靠的数据传输服务，其数据传输的单位为**报文段**
      - **用户数据报协议UDP**：提供无连接的，**尽最大努力**的数据传输服务，其数据传输的单位是**用户数据报**
  - **网络层**：负责为分组交换网上的不同**主机**提供通信服务
    - 网络层把运输层产生的报文段或用户数据报分装成**分组**或者**包**进行传送
    - 在**TCP/IP**体系中，使用IP协议，因此分组也叫做**IP数据报**，或者简称为**数据报**
    - 不要将运输层**用户数据报**和网络层**IP数据报**弄混
  - **数据链路层**：两台主机之间的数据传输，总是在一段一段的链路上传送的，这就是需要使用专门的链路层的协议。数据链路层将网络层交下来的IP数据**组装成帧**，在两个相邻的结点间的链路上传递**帧**，每一帧包含数据和必要的**控制信息**
    - 接收数据时，控制信息使接收端能够知道一个**帧**是从哪个比特开始和到哪个比特结束，这样，数据链路层在收到一个**帧**后，就可从中提出数据部分，上交给网络层
  - **物理层**：物理层上传输数据的单位是**比特**，发送方发送1时，接收方接收1
    - 物理层考虑使用多大的电压代表“1“和”0“
    - 传递信息的物理媒体：双绞线，同轴电缆，光缆，无线设备等，并不是物理层协议内的